# PostgreSQL 서비스 오류 해결 방법

## 문제: 서비스가 시작했다가 중지됨

이 오류는 보통 설정 파일(`postgresql.conf` 또는 `pg_hba.conf`)에 문제가 있을 때 발생합니다.

## 해결 방법

### 방법 1: 설정 파일 확인 및 복구 (추천)

#### 1단계: 로그 파일 확인
PostgreSQL 로그 파일을 확인해서 정확한 오류 원인을 파악하세요:

**로그 파일 위치:**
- `C:\Program Files\PostgreSQL\16\data\log\`
- 또는 `C:\Users\[사용자명]\AppData\Local\PostgreSQL\16\data\log\`

가장 최근 로그 파일을 열어서 오류 메시지를 확인하세요.

#### 2단계: 설정 파일 확인

**`postgresql.conf` 파일:**
```conf
# 이 부분이 올바른지 확인
listen_addresses = '*'  # 따옴표 없이 * 만
```

**`pg_hba.conf` 파일:**
```
# 파일 맨 아래에 추가한 부분이 올바른지 확인
host    all             all             0.0.0.0/0               md5
```

**주의사항:**
- 공백이 정확한지 확인 (탭이 아닌 스페이스)
- 줄 끝에 공백이나 특수문자가 없는지 확인
- 주석(`#`)이 아닌 실제 설정인지 확인

#### 3단계: 설정 파일 되돌리기 (임시)

만약 설정 파일을 수정한 것이 문제라면, 원래대로 되돌리세요:

**`postgresql.conf`:**
```conf
listen_addresses = 'localhost'  # 원래대로
```

**`pg_hba.conf`:**
- 추가한 줄 삭제

그 다음 서비스를 다시 시작해보세요.

### 방법 2: PostgreSQL 재설치 (최후의 수단)

만약 위 방법이 안 되면:
1. PostgreSQL 완전 삭제
2. 재설치
3. 데이터베이스 다시 생성

### 방법 3: 다른 포트 사용

포트 충돌일 수도 있습니다:

**`postgresql.conf`:**
```conf
port = 5433  # 5432 대신 다른 포트 사용
```

그리고 `settings.py`에서도 포트를 변경:
```python
'PORT': '5433',
```

## 빠른 해결책

1. **설정 파일을 원래대로 되돌리기**
2. **서비스 재시작**
3. **서비스가 정상 작동하는지 확인**
4. **그 다음에 다시 설정 파일 수정** (더 조심스럽게)

## 로그 확인 방법

1. **pgAdmin 열기**
2. **PostgreSQL 16 우클릭 → Properties**
3. **Log file 경로 확인**
4. **해당 파일을 메모장으로 열어서 오류 메시지 확인**

가장 최근 오류 메시지를 알려주시면 더 정확한 해결책을 제시할 수 있습니다!

